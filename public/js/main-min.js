const displays=document.querySelectorAll(".display"),startBtn=document.querySelector(".startBtn");let images;const countElem16=document.getElementById("countelem16"),countElem36=document.getElementById("countelem36"),countPairs1=document.getElementById("countpairs1"),countPairs2=document.getElementById("countpairs2"),board=document.querySelector(".board");let ELEMCOUNT=36,PAIRCOUNT=2;const imageNumbers=[];let colorNumber,eventPrev,countCards=0,score=0,countSteps=0,flag_elem=!1,flag_pairs=!1;function checkCardsPairs(){flag_elem&&flag_pairs&&setTimeout(()=>{displays[1].classList.add("displayMoveUp"),boardCreation(),init()},500)}function getBoxSize(){return 36===ELEMCOUNT?16.6:25}function imageNumberCreation(){for(let e=0;e<PAIRCOUNT;++e)for(let e=1;e<ELEMCOUNT/PAIRCOUNT+1;++e)imageNumbers.push(e)}function getTemp(e,t,a){return`<div style="width: ${a}%; height: ${a}%" class="imgBx" >\n    <div data-index="${t}" class="img imgColor${e}" style="background-image: url(../img/${t}.jpg)"></div>\n    </div>`}function getRandomImageNumber(){const e=Math.floor(Math.random()*imageNumbers.length);return imageNumbers.splice(e,1)[0]}function boardCreation(){imageNumberCreation();const e=getBoxSize();board.innerHTML="";for(let t=0;t<ELEMCOUNT;++t){const t=getRandomImageNumber();colorNumber=Math.round(4*Math.random()),board.insertAdjacentHTML("afterbegin",getTemp(colorNumber,t,e))}}function init(){(images=document.querySelectorAll(".img:not(.checkedCard)")).forEach(e=>{e.addEventListener("click",openCard)})}function openCard(e){e.target.classList.contains("openCard")||(countCards++,e.target.classList.remove("notPair"),e.target.classList.remove("closeCard"),e.target.classList.add("openCard"),2==countCards?(countSteps++,stopListen(),checkCards(e),countCards=0):eventPrev=e)}function stopListen(){images.forEach(e=>{e.removeEventListener("click",openCard)})}function checkCards(e){setTimeout(()=>{init()},2600),setTimeout(()=>{e.target.dataset.index===eventPrev.target.dataset.index?(score++,e.target.classList.add("checkedCard"),eventPrev.target.classList.add("checkedCard"),score===ELEMCOUNT/2&&finish()):notPair(e)},800)}function notPair(e){setTimeout(()=>{e.target.classList.add("closeCard"),eventPrev.target.classList.add("closeCard"),e.target.classList.remove("openCard"),eventPrev.target.classList.remove("openCard")},1e3),e.target.classList.add("notPair"),eventPrev.target.classList.add("notPair")}function finish(){setTimeout(()=>{displays[3].innerHTML=`\n    <h1>Congratulation</h1>\n    <h2>Number of <br /> attempts: ${countSteps} </h2>\n    `,displays[2].classList.add("displayMoveUp")},2e3),setTimeout(()=>{location.reload()},4e3)}startBtn.addEventListener("click",e=>{e.preventDefault(),displays[0].classList.add("displayMoveUp")}),setTimeout(()=>{countElem16.addEventListener("click",e=>{flag_elem=!0,countElem36.classList.contains("hovered")&&countElem36.classList.remove("hovered"),e.target.classList.add("hovered"),ELEMCOUNT=+e.target.dataset.countelem,checkCardsPairs()}),countElem36.addEventListener("click",e=>{flag_elem=!0,countElem16.classList.contains("hovered")&&countElem16.classList.remove("hovered"),e.target.classList.add("hovered"),ELEMCOUNT=+e.target.dataset.countelem,checkCardsPairs()}),countPairs1.addEventListener("click",e=>{flag_pairs=!0,countPairs2.classList.contains("hovered")&&countPairs2.classList.remove("hovered"),e.target.classList.add("hovered"),PAIRCOUNT=+e.target.dataset.countpairs,checkCardsPairs()}),countPairs2.addEventListener("click",e=>{flag_pairs=!0,countPairs1.classList.contains("hovered")&&countPairs1.classList.remove("hovered"),e.target.classList.add("hovered"),PAIRCOUNT=+e.target.dataset.countpairs,checkCardsPairs()})},0);